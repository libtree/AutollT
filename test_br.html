<!DOCTYPE html>
<html><head>
<meta charset="utf-8"/>
</head>
<body>
<pre id=output></pre>

<script type=module>

import big_integer from "./big_integer.js";
import big_rational from "./big_rational.js";
import JSCheck from "./jscheck.js";
const jsc = JSCheck();

function bigrational(max_nr_bits) {
    return function () {
        let nr_bits = Math.floor(Math.random() * max_nr_bits);
        let numerator = big_integer.random(Math.floor(Math.random() * nr_bits));
        if (Math.random() < 0.5) {
            numerator = big_integer.neg(numerator);
        }
        let denominator = big_integer.random(Math.floor(Math.random() * nr_bits));
        let result = big_rational.make(numerator, denominator);
        if (result === undefined) {
            return big_rational.zero;
        }
        return result;
    };
}

function bigint(max_nr_bits) {
    return function () {
        let nr_bits = Math.floor(Math.random() * max_nr_bits);
        let result = big_integer.random(nr_bits);
        return (Math.random() < 0.5)
            ? big_integer.neg(result)
            : result;
    }
}



jsc.claim("add & sub", function (verdict, a, b) {
    let c = big_rational.add(a, b);
    let aa = big_rational.sub(c, b);
    let cc = big_rational.add(aa, b);
    return verdict(big_rational.eq(c, cc));
}, [bigrational(1000), bigra